<html><head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FV9GG7V9PM"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-FV9GG7V9PM');
</script>
<title>Photogrammetry for 3D Mapping of Caves</title>
<meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ol.lst-kix_6kah9u7lpjzp-3.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-3 0}.lst-kix_bz92m2wyhixu-0>li:before{content:"-  "}.lst-kix_x08chb16ai78-6>li{counter-increment:lst-ctn-kix_x08chb16ai78-6}.lst-kix_bz92m2wyhixu-2>li:before{content:"-  "}ol.lst-kix_x08chb16ai78-7.start{counter-reset:lst-ctn-kix_x08chb16ai78-7 0}.lst-kix_bz92m2wyhixu-1>li:before{content:"-  "}ol.lst-kix_6kah9u7lpjzp-0.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-0 0}ol.lst-kix_6kah9u7lpjzp-6.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-6 0}.lst-kix_x08chb16ai78-5>li{counter-increment:lst-ctn-kix_x08chb16ai78-5}.lst-kix_bz92m2wyhixu-7>li:before{content:"-  "}.lst-kix_bz92m2wyhixu-8>li:before{content:"-  "}.lst-kix_bz92m2wyhixu-6>li:before{content:"-  "}.lst-kix_6kah9u7lpjzp-6>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-6}.lst-kix_bz92m2wyhixu-3>li:before{content:"-  "}.lst-kix_bz92m2wyhixu-4>li:before{content:"-  "}.lst-kix_bz92m2wyhixu-5>li:before{content:"-  "}.lst-kix_6kah9u7lpjzp-5>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-5,lower-roman) ". "}.lst-kix_x08chb16ai78-7>li{counter-increment:lst-ctn-kix_x08chb16ai78-7}.lst-kix_6kah9u7lpjzp-2>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-2,lower-roman) ". "}.lst-kix_6kah9u7lpjzp-6>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-6,decimal) ". "}ol.lst-kix_x08chb16ai78-1.start{counter-reset:lst-ctn-kix_x08chb16ai78-1 0}.lst-kix_x08chb16ai78-4>li{counter-increment:lst-ctn-kix_x08chb16ai78-4}.lst-kix_6kah9u7lpjzp-1>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-1,lower-latin) ". "}.lst-kix_6kah9u7lpjzp-7>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-7,lower-latin) ". "}.lst-kix_6kah9u7lpjzp-8>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-8,lower-roman) ". "}.lst-kix_6kah9u7lpjzp-0>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-0,decimal) ". "}ul.lst-kix_57yjhaqmi0pb-0{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-1{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-2{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-3{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-4{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-5{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-6{list-style-type:none}ul.lst-kix_57yjhaqmi0pb-7{list-style-type:none}ol.lst-kix_x08chb16ai78-4.start{counter-reset:lst-ctn-kix_x08chb16ai78-4 0}ul.lst-kix_57yjhaqmi0pb-8{list-style-type:none}.lst-kix_6kah9u7lpjzp-3>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-3,decimal) ". "}.lst-kix_6kah9u7lpjzp-5>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-5}.lst-kix_6kah9u7lpjzp-8>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-8}.lst-kix_6kah9u7lpjzp-4>li:before{content:"" counter(lst-ctn-kix_6kah9u7lpjzp-4,lower-latin) ". "}ol.lst-kix_6kah9u7lpjzp-1.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-1 0}.lst-kix_x08chb16ai78-8>li{counter-increment:lst-ctn-kix_x08chb16ai78-8}.lst-kix_x08chb16ai78-2>li{counter-increment:lst-ctn-kix_x08chb16ai78-2}ol.lst-kix_x08chb16ai78-5.start{counter-reset:lst-ctn-kix_x08chb16ai78-5 0}.lst-kix_6kah9u7lpjzp-3>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-3}ol.lst-kix_6kah9u7lpjzp-8.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-8 0}ol.lst-kix_x08chb16ai78-8{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-1{list-style-type:none}ol.lst-kix_x08chb16ai78-5{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-0{list-style-type:none}ol.lst-kix_x08chb16ai78-4{list-style-type:none}ol.lst-kix_x08chb16ai78-7{list-style-type:none}ol.lst-kix_x08chb16ai78-6{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-5{list-style-type:none}ol.lst-kix_x08chb16ai78-1{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-4{list-style-type:none}ol.lst-kix_x08chb16ai78-0{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-3{list-style-type:none}ol.lst-kix_x08chb16ai78-3{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-2{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-2.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-2 0}ol.lst-kix_x08chb16ai78-2{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-8{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-7{list-style-type:none}ol.lst-kix_x08chb16ai78-6.start{counter-reset:lst-ctn-kix_x08chb16ai78-6 0}ol.lst-kix_6kah9u7lpjzp-6{list-style-type:none}ol.lst-kix_x08chb16ai78-0.start{counter-reset:lst-ctn-kix_x08chb16ai78-0 0}.lst-kix_x08chb16ai78-5>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-5,lower-roman) ". "}.lst-kix_x08chb16ai78-6>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-6,decimal) ". "}.lst-kix_x08chb16ai78-7>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-7,lower-latin) ". "}ol.lst-kix_x08chb16ai78-8.start{counter-reset:lst-ctn-kix_x08chb16ai78-8 0}.lst-kix_x08chb16ai78-8>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-8,lower-roman) ". "}.lst-kix_6kah9u7lpjzp-0>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-0}.lst-kix_x08chb16ai78-1>li{counter-increment:lst-ctn-kix_x08chb16ai78-1}ul.lst-kix_bz92m2wyhixu-4{list-style-type:none}ul.lst-kix_bz92m2wyhixu-3{list-style-type:none}ul.lst-kix_bz92m2wyhixu-6{list-style-type:none}ul.lst-kix_bz92m2wyhixu-5{list-style-type:none}ul.lst-kix_bz92m2wyhixu-8{list-style-type:none}ul.lst-kix_bz92m2wyhixu-7{list-style-type:none}.lst-kix_6kah9u7lpjzp-2>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-2}ol.lst-kix_6kah9u7lpjzp-7.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-7 0}ul.lst-kix_bz92m2wyhixu-0{list-style-type:none}ol.lst-kix_6kah9u7lpjzp-4.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-4 0}ul.lst-kix_bz92m2wyhixu-2{list-style-type:none}ul.lst-kix_bz92m2wyhixu-1{list-style-type:none}.lst-kix_x08chb16ai78-3>li{counter-increment:lst-ctn-kix_x08chb16ai78-3}ol.lst-kix_x08chb16ai78-2.start{counter-reset:lst-ctn-kix_x08chb16ai78-2 0}ol.lst-kix_6kah9u7lpjzp-5.start{counter-reset:lst-ctn-kix_6kah9u7lpjzp-5 0}.lst-kix_6kah9u7lpjzp-7>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-7}.lst-kix_57yjhaqmi0pb-6>li:before{content:"\0025cf  "}.lst-kix_57yjhaqmi0pb-5>li:before{content:"\0025a0  "}.lst-kix_57yjhaqmi0pb-7>li:before{content:"\0025cb  "}.lst-kix_6kah9u7lpjzp-1>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-1}.lst-kix_57yjhaqmi0pb-4>li:before{content:"\0025cb  "}.lst-kix_57yjhaqmi0pb-8>li:before{content:"\0025a0  "}ol.lst-kix_x08chb16ai78-3.start{counter-reset:lst-ctn-kix_x08chb16ai78-3 0}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_6kah9u7lpjzp-4>li{counter-increment:lst-ctn-kix_6kah9u7lpjzp-4}.lst-kix_x08chb16ai78-4>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-4,lower-latin) ". "}.lst-kix_x08chb16ai78-3>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-3,decimal) ". "}.lst-kix_x08chb16ai78-1>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-1,lower-latin) ". "}.lst-kix_57yjhaqmi0pb-0>li:before{content:"\0025cf  "}.lst-kix_x08chb16ai78-2>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-2,lower-roman) ". "}.lst-kix_57yjhaqmi0pb-2>li:before{content:"\0025a0  "}.lst-kix_57yjhaqmi0pb-1>li:before{content:"\0025cb  "}.lst-kix_57yjhaqmi0pb-3>li:before{content:"\0025cf  "}.lst-kix_x08chb16ai78-0>li:before{content:"" counter(lst-ctn-kix_x08chb16ai78-0,decimal) ". "}.lst-kix_x08chb16ai78-0>li{counter-increment:lst-ctn-kix_x08chb16ai78-0}ol{margin:0;padding:0}table td,table th{padding:0}.c17{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c0{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c4{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c6{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c10{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c13{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c19{color:#434343;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:14pt;font-family:"Arial";font-style:normal}.c15{padding-top:10pt;padding-bottom:4pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c14{padding-top:10pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c18{padding-top:4pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c12{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c16{background-color:#ffffff;max-width:538.6pt;padding:72pt 28.3pt 72pt 28.3pt}.c11{margin-left:72pt;padding-left:0pt}.c2{padding:0;margin:0}.c9{margin-left:36pt;padding-left:0pt}.c5{color:inherit;text-decoration:inherit}.c7{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c16"><p class="c17 title" id="h.vnxiuqugt94b"><span class="c8">Photogrammetry for 3D Mapping of Caves</span></p><p class="c0"><span class="c1"></span></p><p class="c18"><span class="c4"><a class="c5" href="#h.60xu37z6dxa">Overview</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.60xu37z6dxa">1</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.fb4vb89qrioi">Photogrammetry software</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.fb4vb89qrioi">1</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.n0nroftrylw1">First experiments with a small cave</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.n0nroftrylw1">2</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.hy52i9ozvsuw">Setup for a bigger cave</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.hy52i9ozvsuw">3</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.oshtrafy50hl">Mapping a bigger cave</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.oshtrafy50hl">3</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.8hek3ivxuyko">Comparing Lidar and photogrammetry models</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.8hek3ivxuyko">6</a></span></p><p class="c14"><span class="c7"><a class="c5" href="#h.ck7j2ibb2fke">Photos vs video</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c5" href="#h.ck7j2ibb2fke">6</a></span></p><p class="c14"><span class="c7"><a class="c5" href="#h.ht3sphi3jmh9">Scaling to real size</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c5" href="#h.ht3sphi3jmh9">7</a></span></p><p class="c14"><span class="c7"><a class="c5" href="#h.ytqmb0g98nnp">Processing times</a></span><span class="c7">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c7"><a class="c5" href="#h.ytqmb0g98nnp">7</a></span></p><p class="c14"><span class="c4"><a class="c5" href="#h.wm40jcood4bn">Open issues</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.wm40jcood4bn">7</a></span></p><p class="c15"><span class="c4"><a class="c5" href="#h.fapq5afvci6x">References</a></span><span class="c4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="c4"><a class="c5" href="#h.fapq5afvci6x">7</a></span></p><h2 class="c10" id="h.60xu37z6dxa"><span class="c13">Overview</span></h2><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">&ldquo;Photogrammetry is the science and technology of obtaining reliable information about physical objects and the environment through the process of recording, measuring and interpreting photographic images and patterns of electromagnetic radiant imagery and other phenomena.&rdquo; -- Wikipedia</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">After learning about a technique called photogrammetry and inspired by the work done by Jari Arkko [1] [2] in cave 3D mapping I decided to try photogrammetry in caves. Since I do not have Lidar tools available but I do have a camera this sounded like an interesting experiment.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">This text describes my first results after starting to experiment with photogrammetry.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Photogrammetry is not a new technique and it has already been used in caves before. I found the article &ldquo;Joseph H. Jordan: Modeling Ozark Caves with Structure-fromMotion Photogrammetry: An Assessment of Stand-Alone Photogrammetry for 3-Dimensional Cave Survey&rdquo; [3] very useful. Also article &ldquo;L. Alessandri, V. Baiocchi, S. Del Pizzo, M. F. Rolfo, S. Troisi: Photogrammetric survey with fisheye lens for the characterization of the la sassa cave&rdquo; [4] was interesting.</span></p><h2 class="c10" id="h.fb4vb89qrioi"><span class="c13">Photogrammetry software</span></h2><p class="c3"><span class="c1">There are a lot of free software for photogrammetry. </span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>After a quick research I decided to start with </span><span class="c7">Meshroom</span><span class="c1">. So far I have been pretty happy with that choice. Meshroom is very easy to use, you just add input images and press the start button. The problem with Meshroom is that it works only in Windows or Linux and requires a Nvidia graphics card. Luckily I inherited a gaming laptop with an Nvidia card from my kids :-) So far it looks like the basic model is pretty good but there are also a lot of incorrect alignments outside of the correct model. So quite a lot of cleanup is needed. I have been running with default settings so maybe some tuning would help. </span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c7">RealityCapture</span><span class="c1">&nbsp;promised better performance. I have tried that quickly and it produced a great looking model quite quickly. Unfortunately it could not build the mode correctly. Maybe parameter changes could help.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>Agisoft </span><span class="c7">MetaShape </span><span class="c1">(previously PhotoScan) was used in [3] and [4] but since it is not free software I have not tried it.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>For cleanup, export and combining models I have used </span><span class="c7">Blender</span><span>. So far that has worked fine but some more learning is needed for cleanup, model scaling, combining models, etc. </span><span class="c7">MeshLab </span><span class="c1">is another free software that looks promising.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">For other software, Meshmixer failed to start on my machine. InstantMeshes looks promising for making smaller models but it could not work on my cave model.</span></p><h3 class="c6" id="h.p7wqrrmeaa78"><span class="c19">Notes on Meshroom settings</span></h3><p class="c3"><span class="c1">Meshroom creates a pretty big mesh. Following some instructions I used a MeshDecimate node to reduce the model size. The decimated mesh had some weird incorrect sides in the model. Only after some time did I go back to check with the bigger original model and noticed that it was much cleaner. So it looks like the MeshDecimate node also makes some artefacts and the result is also a lot worse.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Now I need to find a better way to reduce the model to be more manageable.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Interestingly the settings below seem to generate a better model for the top part of the Torhola cave but the worse results for the bottom part. </span></p><p class="c0"><span class="c1"></span></p><ul class="c2 lst-kix_57yjhaqmi0pb-0 start"><li class="c3 c9 li-bullet-0"><span class="c1">FeatureExtraction - Describer Types: check akaze, optionally for small data sets Force CPU Extraction: uncheck</span></li><li class="c3 c9 li-bullet-0"><span class="c1">Feature Matching - Guided matching: enable</span></li><li class="c3 c9 li-bullet-0"><span class="c1">MeshFiltering - Keep Only the Largest Mesh: enable</span></li><li class="c3 c9 li-bullet-0"><span class="c1">MeshResampling - Could be useful, need to check. This is not in the default workflow.</span></li><li class="c3 c9 li-bullet-0"><span class="c1">Texturing - Texture Side: 4096, Texture File Type: jpg for smaller files</span></li></ul><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Obviously more experimenting is needed. Removing &ldquo;Feature Matching - Guided matching: enable&rdquo; did not make any change. Next testing &ldquo;Describer Types: check akaze&rdquo;.</span></p><h2 class="c10" id="h.n0nroftrylw1"><span class="c13">First experiments with a small cave</span></h2><p class="c3"><span class="c1">I started my first experiment with a very simple H&ouml;gberget cave. For mapping H&ouml;gberget cave I used a DSLR camera with a wide angle lens (15 mm full frame equivalent) and a ring light. I used a traditional technique where I tried to take multiple photograms from all angles. The cave is very small and narrow so I ended with a lot of images where quite a few of them I believe were unnecessary. The results were still quite promising for the first test.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 718.11px; height: 334.67px;"><img alt="" src="pg1image2.jpg" style="width: 718.11px; height: 334.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">A rotatable transparent 3D model of the H&ouml;rberget cave can be found here: </span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3D3dhogberget.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016003216&amp;usg=AOvVaw31qtMXpAM6VIl9yA8dSAag">https://ruuth.xyz/3dtest.html?m=3dhogberget.glb</a></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">One of the problems with this experiment was that the ring light was not very powerful and using a DSLR in a real cave with tight spaces and water and mud did not feel like a good idea.</span></p><h2 class="c10" id="h.hy52i9ozvsuw"><span class="c13">Setup for a bigger cave</span></h2><p class="c3"><span class="c1">After the first experiment I did some search on the internet. I came up with an article [3] which used a Gopro camera and a portable work light for taking images. That sounded like a good setup as I already had a Gopro camera and I just needed to get a portable work light.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">There are many benefits of using Gopro in a cave. It has a very wide angle lens, fixed focus and aperture and depth of field is almost from zero to infinity. It is also a rugged camera that is waterproof and can take some hits. My model is a Gopro 6 which has a screen for framing.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">One of the problems is that Gopro is not very good at low light and in caves there usually is no light. Most headlamps are not powerful enough or the beam is very narrow. So I used a battery powered work light as the light source for cave photos. It turned out to be a good solution. Work light has a very wide beam that was wide enough for Gopro 122 degree of FoV. This model promised to produce 1800 lumens of light and it seemed to be enough for this cave as very few images were blurry or too dark. I was also able to attach Gopro camera to the work light which made things easier and avoided some human errors in the process (but not all of them :-).</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 275.70px; height: 367.20px;"><img alt="" src="pg1image4.jpg" style="width: 275.70px; height: 367.20px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><h2 class="c10" id="h.oshtrafy50hl"><span class="c13">Mapping a bigger cave</span></h2><p class="c3"><span class="c1">For my first real cave mapping experiment I chose Torhola cave. It is one of the rare karst caves in Finland and feels like a real cave. The cave is about 30 meters long so it is not very long (except in Finland). It is reasonably close to the place where I live, which is convenient . And one major advantage is that Jari Arkko has already done a 3D model using iPhone Lidar [1] so I could compare these two methods. </span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">I decided to divide the mapping into two parts. First part of the cave is pretty wide and open. In the second part you need to drop into a small hole and crawl to the end of the cave.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Photo capture method was basically the same as in [3]. Idea is to take a wide angle picture that covers both walls, roof and floor all at the same time when walking through the cave. I did take some side pictures and backward pictures too to try to minimize holes in the model.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">First open part of the cave is relatively easy to map. In my case there are some holes in the model but I believe that is just a problem with the mapper person.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">In the second smaller part I ran into some problems. In the first try I took too few photos to get any realistic model of the cave. In the second try I took a lot more frequent photos. When going through tight parts you need to take photos a lot more frequently to ensure a proper overlap.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">The second part of the model is done using only photos taken when going towards the end of the cave. It does not include any photos taken in the other direction except a few in the very last part of the cave. Also two smaller side tunnels are not there yet. These are something I need to work on.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">I took all the photos with a single light source. You should get better results with more lights and maybe other people pointing and positioning the lights..</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Processing was done using scaled down images. All images from Gopro were scaled to a size where the longest side was 2000 pixels.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Below is a screen capture of the point cloud and camera positions (StructureFromMotion) calculated by Meshroom.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 718.11px; height: 402.67px;"><img alt="" src="pg1image1.jpg" style="width: 718.11px; height: 402.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Below is a screen capture where I have combined two models together. I combined the models in Blender. This is just a rough model that was manually scaled and aligned.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 718.11px; height: 472.00px;"><img alt="" src="pg1image3.jpg" style="width: 718.11px; height: 472.44px; margin-left: 0.00px; margin-top: -0.22px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">A rotatable transparent 3D model of the first part of the Torhola cave is here: </span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3DTorhola1.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016006644&amp;usg=AOvVaw1C6g_wHs3QQz4BPcN5zeyz">https://ruuth.xyz/3dtest.html?m=Torhola1.glb</a></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">A rotatable transparent 3D model of the second part of the Torhola cave is here: </span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3DTorhola2.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016007148&amp;usg=AOvVaw1YPflRuVEWfr6uk7ksvTaW">https://ruuth.xyz/3dtest.html?m=Torhola2.glb</a></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">A rotatable transparent 3D model of the combined Torhola cave is here:</span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3DTorhola_v1_open.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016007553&amp;usg=AOvVaw2WLcAG5T3AeFscOhoW9wSh">https://ruuth.xyz/3dtest.html?m=Torhola_v1_open.glb</a></span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">A rotatable closed 3D model of the combined Torhola cave is here:</span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3DTorhola_v1_closed.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016007951&amp;usg=AOvVaw0U7DNOSDT0_ShCBKJpU_jQ">https://ruuth.xyz/3dtest.html?m=Torhola_v1_closed.glb</a></span></p><h2 class="c10" id="h.8hek3ivxuyko"><span class="c13">Comparing Lidar and photogrammetry models</span></h2><p class="c3"><span class="c1">In the link below it is possible to visually compare Jari Arkko&rsquo;s Lidar based model to a model generated using photogrammetry.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://ruuth.xyz/3dtest.html?m%3DTorhola_v1_lidar_vs_photo.glb&amp;sa=D&amp;source=editors&amp;ust=1642581016008527&amp;usg=AOvVaw2jCJ_5Nc-R5rPDvEx_QpN9">https://ruuth.xyz/3dtest.html?m=Torhola_v1_lidar_vs_photo.glb</a></span></p><h2 class="c10" id="h.ck7j2ibb2fke"><span class="c13">Photos vs video</span></h2><p class="c3"><span class="c1">I did some experiments by capturing photos from a video but the results were not very good. With video it was very easy to cover a lot of space but unfortunately I ended up with too many blurry images. Blurry images cannot be aligned properly in photogrammetry software. Better light or better technique might help here.</span></p><h2 class="c10" id="h.ht3sphi3jmh9"><span class="c13">Scaling to real size</span></h2><p class="c3"><span class="c1">I measured some real objects in the cave and used those measurements to roughly translate both models to a real world size. This was done in Blender by creating a cube that matches with the real measurement. The cube was placed to the measured object in the cave and then scaled so that cube and object sizes match. This of course gives just an approximate size.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">Then two models were aligned to match on the common part. The angle between these two models is just a visual approximation.</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">This methods gives Torhola cave outside size as:</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span class="c1">length 28.4 m</span></p><p class="c3"><span class="c1">width 12.5 m</span></p><p class="c3"><span class="c1">height 9.4 m</span></p><p class="c0"><span class="c1"></span></p><p class="c3"><span>These numbers mean that Torhola cave would fit inside of a box with those dimensions.</span></p><h2 class="c10" id="h.ytqmb0g98nnp"><span class="c13">Processing times</span></h2><p class="c3"><span class="c1">To get an idea how long it takes to process a model on a computer, I have added timings from one example. These are Meshroom processing times for part two of the model, 119 images scaled down to 2000 pixels on the longest size.</span></p><p class="c0"><span class="c1"></span></p><ul class="c2 lst-kix_bz92m2wyhixu-0 start"><li class="c3 c9 li-bullet-0"><span class="c1">Intel Core i5, Nvidia 1050, M.2 PCIe SSD, laptop: 1 hour 32 min</span></li><li class="c3 c9 li-bullet-0"><span class="c1">Intel Core i7, Nvidia 3070, M.2 PCIe SSD, &nbsp;desktop: 38 min</span></li></ul><h2 class="c10" id="h.wm40jcood4bn"><span class="c13">Open issues</span></h2><p class="c3"><span class="c1">There are obviously many open issues with this experiment. I am listing below some of those. As I just started the cave mapping and photogrammetry some of these may be trivial ones. </span></p><p class="c0"><span class="c1"></span></p><ol class="c2 lst-kix_6kah9u7lpjzp-0 start" start="1"><li class="c3 c9 li-bullet-0"><span class="c1">What is the accuracy of this model? Visually and after some measurements it looks pretty much correct but more checks are needed.</span></li><li class="c3 c9 li-bullet-0"><span class="c1">How to correctly rotate the model. The model that comes out of Meshroom is typically more or less upside down. So it needs to be rotated and I did that in Blender. This was done only visually and manually so a better mechanism would be needed.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-1 start" start="1"><li class="c3 c11 li-bullet-0"><span class="c1">Maybe something like CCTags that are placed in a known location and angle would help here.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-0" start="3"><li class="c3 c9 li-bullet-0"><span class="c1">How to scale two models to correctly match with each other. At least in my first experiment when I loaded two models into Blender they were not in the correct scale. </span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-1 start" start="1"><li class="c3 c11 li-bullet-0"><span class="c1">See item 5 below.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-0" start="4"><li class="c3 c9 li-bullet-0"><span class="c1">How to align two models. In [3] it was suggested that an overlap in the models helps with alignment. So you include photos from the previous model set to the next one. That sounds like a good suggestion. In my case the narrow part is a problem as I did not manage to get a proper overlap between models. This needs more experimenting.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-1 start" start="1"><li class="c3 c11 li-bullet-0"><span class="c1">Maybe something like CCTags that are placed in the overlapping part of two models would help.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-0" start="5"><li class="c3 c9 li-bullet-0"><span class="c1">How to do measurements from the model.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-1 start" start="1"><li class="c3 c11 li-bullet-0"><span class="c1">If there is a known measurement in the model then tools like MeshLab can be used to scale the model correctly.</span></li><li class="c3 c11 li-bullet-0"><span class="c1">Meshroom supports CCTags which can be used to scale the model correctly.</span></li></ol><ol class="c2 lst-kix_6kah9u7lpjzp-0" start="6"><li class="c3 c9 li-bullet-0"><span class="c1">How to calculate GPS coordinates for different parts of the cave. Some articles show that this can be done with three reference points.</span></li><li class="c3 c9 li-bullet-0"><span class="c1">How to build 2D maps from the model. Jari Arkko has started work on this [5]. Some articles mention this but I have not looked into it yet.</span></li><li class="c3 c9 li-bullet-0"><span class="c1">How to map narrow tunnels. This I feel needs still more work although just taking more photos looks promising.</span></li></ol><h2 class="c10" id="h.fapq5afvci6x"><span class="c13">References</span></h2><ol class="c2 lst-kix_x08chb16ai78-0 start" start="1"><li class="c3 c9 li-bullet-0"><span>Jari Arkko: 3D Model of the Torhola Cave<br></span><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://planetskier.blogspot.com/2021/05/3d-model-of-torhola-cave.html&amp;sa=D&amp;source=editors&amp;ust=1642581016013079&amp;usg=AOvVaw19KJQzOGakB9K3wIWzUihe">https://planetskier.blogspot.com/2021/05/3d-model-of-torhola-cave.html</a></span></li><li class="c3 c9 li-bullet-0"><span>Jari Arkko: Planetcaver&#39;s list of maps<br></span><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://www.planetcaver.net/maplist-length.html&amp;sa=D&amp;source=editors&amp;ust=1642581016013408&amp;usg=AOvVaw3K6GGOl6ZtxuOABm-Wwj9e">https://www.planetcaver.net/maplist-length.html</a></span></li><li class="c3 c9 li-bullet-0"><span>Joseph H. Jordan: Modeling Ozark Caves with Structure-from-Motion Photogrammetry: An Assessment of Stand-Alone Photogrammetry for 3-Dimensional Cave Survey </span><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://core.ac.uk/download/pdf/127621674.pdf&amp;sa=D&amp;source=editors&amp;ust=1642581016013721&amp;usg=AOvVaw3SqxeJHRomk4bKHWXb9cOV">https://core.ac.uk/download/pdf/127621674.pdf</a></span></li><li class="c3 c9 li-bullet-0"><span>L. Alessandri, V. Baiocchi, S. Del Pizzo, M. F. Rolfo, S. Troisi: Photogrammetric survey with fisheye lens for the characterization of the la sassa cave<br></span><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://core.ac.uk/reader/231746310&amp;sa=D&amp;source=editors&amp;ust=1642581016014062&amp;usg=AOvVaw0lhRSbVJ71mxWLkIqhTehJ">https://core.ac.uk/reader/231746310</a></span></li><li class="c3 c9 li-bullet-0"><span>Jari Arkko: Cave Outliner<br></span><span class="c12"><a class="c5" href="https://www.google.com/url?q=https://github.com/jariarkko/cave-outliner&amp;sa=D&amp;source=editors&amp;ust=1642581016014406&amp;usg=AOvVaw2qwtITQWsr4ynEZzbld2-2">https://github.com/jariarkko/cave-outliner</a></span></li></ol><p class="c0"><span class="c1"></span></p><p class="c0"><span class="c1"></span></p></body></html>